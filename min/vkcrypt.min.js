var Aes,VKCrypt,_gaq;
(function(){function f(){var a=localStorage.getItem(h);a||VKCrypt.setPassword();return a}function j(){_gaq=[["_setAccount","UA-26518084-2"],["_trackPageview"]];var a=window.onerror;window.onerror=function(b,c,d){_gaq.push(["_trackEvent","JS Error",b,navigator.userAgent+" -> "+c+" : "+d]);"function"===typeof a&&a();return!0}}function i(a,b){for(var c,d,e=f(),g=0;g<a.length;g++)d=a[g].getElementsByClassName("im_log_body")[0],d=d.firstChild,(c=d.getElementsByClassName("im_log_author_chat_name")[0])&&d.removeChild(c),
c=d.textContent,c=b?Aes.Ctr.encrypt(c,e,256):Aes.Ctr.decrypt(c,e,256),d.textContent=c}if(!_gaq&&!document.getElementById("http://google-analytics.com/ga.js")){var e=document.createElement("script");e.id=e.src="http://google-analytics.com/ga.js";e.onload=j;document.body.appendChild(e)}var h="vkcrypt-pass";VKCrypt={encrypt:function(){var a=document.getElementsByClassName("im_sel_row");if(a.length)i(a,!0);else{var a=document.getElementsByClassName("im_editable")[0],b=f(),b=Aes.Ctr.encrypt(a.textContent,
b,256);a.textContent=b}},decrypt:function(){var a=document.getElementsByClassName("im_sel_row");if(a.length)i(a,!1);else{var a=document.getElementsByClassName("im_editable")[0],b=f(),b=Aes.Ctr.decrypt(a.textContent,b,256);a.textContent=b}},setPassword:function(){var a=f(),a=prompt("Password: ",a||"");localStorage.setItem(h,a)}}})();